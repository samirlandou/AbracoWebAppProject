<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:pe="http://primefaces.org/ui/extensions"
	template="/pages/template/systemModel.xhtml">



	<!-- MENU
	<ui:define name="menu">
		<ui:include src="/pages/includes/menuPrincipal.xhtml">
		</ui:include>
	</ui:define>  -->



	<!-- CONTENT -->
	<ui:define name="content">
		
		<!-- MENU -->
		<ui:include src="/pages/includes/menuPrincipal.xhtml"/>
		
		
		<!-- BODY -->
		<!-- LISTING PANEL FORM -->
		<div>
			<br/>
			<h:form id="contractListFormId">
				<p:panel header="Lista de Contrato">
					<p:dataTable id="contractDataTableFormId" emptyMessage="Nenhum registro encontrado."
						paginator="true" value="#{contractController.contractsDomain}" var="cursor" rows="10"
						resizableColumns="true" resizeMode="fit" reflow="true" rowHover="true"
						draggableColumns="true">
	
						
						<!-- DE_CODE -->
						<p:column headerText="Código contrato" sortBy="#{cursor.codeDescription}" filterBy="#{cursor.codeDescription}">
							<h:outputText value="#{cursor.codeDescription}"/>
						</p:column>
	
						<!-- DE_LANGUAGE -->
						<p:column headerText="Língua" sortBy="#{cursor.languageDescription}" filterBy="#{cursor.languageDescription}">
							<h:outputText value="#{cursor.languageDescription}"/>
						</p:column>
	
						<!-- DE_PROFESSOR -->
						<p:column headerText="Professor" sortBy="#{cursor.userDomain.userName}" filterBy="#{cursor.userDomain.userName}">
							<h:outputText value="#{cursor.userDomain.userName}"/>					
						</p:column>
	
						<!-- FG_CLOSED -->
						<p:column headerText="Status" sortBy="#{cursor.closedFlag}" filterBy="#{cursor.closedFlag}">
							<h:outputText value="#{cursor.closedFlag}"/>
						</p:column>

						
						<!-- OPTIONS -->
						<p:column headerText="Opções">
	
							<!-- BUTTON TO EDIT -->
							<p:commandButton icon="ui-icon-pencil" actionListener="#{contractController.doEdit}"
											oncomplete="PF('dlgNewContract').show();"
											update=":idMsgGlobal 
													:contractListFormId:contractDataTableFormId 
													:contractRegisterFormID:wizardFormID">
								<f:attribute name="selectedContractByCursor" value="#{cursor}"/>
								<f:actionListener type="org.omnifaces.eventlistener.ResetInputAjaxActionListener" />
							</p:commandButton>
						
							<!-- BUTTON TO DELETE -->
							<p:commandButton icon="ui-icon-trash" actionListener="#{contractController.doDelete}"
											update=":idMsgGlobal 
													:contractListFormId:contractDataTableFormId 
													:contractRegisterFormID:wizardFormID">
								<p:confirm header="Confirmação" message="Deseja excluir #{cursor.completeName}?" icon="ui-icon-alert"/>
								<f:attribute name="selectedContractByCursor" value="#{cursor}"/>
							</p:commandButton>
						</p:column>
	
	
						<!-- FACET FOR THE FOOTER -->
						<f:facet name="footer">
	
							<!-- NEW BUTTON -->
							<p:commandButton value="Novo"
								actionListener="#{contractController.doNewRegister}"
								oncomplete="PF('dlgNewContract').show();"
								update=":contractListFormId:contractDataTableFormId 
										:contractRegisterFormID:wizardFormID">
								<f:actionListener type="org.omnifaces.eventlistener.ResetInputAjaxActionListener"/>
							</p:commandButton>
						</f:facet>
	
					</p:dataTable>	
					
					<!-- CONFIRM DIALOG WHEN DELETING -->
					<p:confirmDialog global="true" >
						<p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>		
						<p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/>
					</p:confirmDialog>
					
				</p:panel>
			</h:form>

			
			<!-- DIALOG DIALOG TO REGISTER NEW CONTRACT -->			
			<p:dialog header="Cadastrar Novo Contrato" widgetVar="dlgNewContract"
				draggable="true" resizable="false" modal="true" closable="true"
				appendTo="@(body)" height="600" width="600" closeOnEscape="true"
				responsive="true" maximizable="true">
				
				<!-- FORM FOR THE DIALOG -->
				<h:form id="contractRegisterFormID">
				
					<!-- WIZARD TO FILL FORMS -->
					<p:wizard flowListener="#{contractController.doFlowProcess}" id="wizardFormID" widgetVar="wizardForm">								
						<p:tab id="languageTabID" title="Língua">
							<p:panel header="Informações sobre a língua.">
								<p:messages/>
								<h:panelGrid id="languageInputRegisterFormID" columns="2">
									<p:outputLabel value="Língua: " for="languageComboID"/>
									<p:selectOneMenu id="languageComboID" filter="false" value="#{contractController.contractDomain.languageDescription}"
										converter="omnifaces.SelectItemsConverter" required="true" requiredMessage="O campo 'Língua' é obrigatório">
										<f:selectItem noSelectionOption="true" itemLabel="Selecione uma Língua" />
										<f:selectItem itemLabel="ARÁBE" itemValue="AR"/>
										<f:selectItem itemLabel="ESPANHOL" itemValue="ES"/>
										<f:selectItem itemLabel="FRANCÊS" itemValue="FR"/>
										<f:selectItem itemLabel="INGLÊS" itemValue="EN"/>
										<f:selectItem itemLabel="PORTUGUÊS" itemValue="BR"/>
										<p:ajax event="change"
											process="@this" global="false"
											listener="#{contractController.doUpdateLevel}"
											update="contractRegisterFormID:levelComboID"/>
									</p:selectOneMenu>
									
									<p:outputLabel value="Nível: " for="levelComboID"/>
									<p:selectOneMenu id="levelComboID" filter="false" value="#{contractController.contractDomain.levelDescription}"
										converter="omnifaces.SelectItemsConverter" required="true" requiredMessage="O campo 'Nível' é obrigatório">
										<f:selectItem noSelectionOption="true" itemLabel="Escolhe um nível"/>
										<f:selectItems value="#{contractController.levels}"/>
									</p:selectOneMenu>
									
									<p:outputLabel value="Pular para o resumo" rendered="#{contractController.skipRendered}"/>
									<p:selectBooleanCheckbox value="#{contractController.skip}" rendered="#{contractController.skipRendered}"/>
								</h:panelGrid>															
							</p:panel>					
						</p:tab>
						
						<p:tab id="periodTabID" title="Periodo">
						<p:panel header="Informações sobre o periodo do contrato.">
							<p:messages/>
							<h:panelGrid id="periodInputRegisterFormID" columns="2" >				
								<p:outputLabel for="beginPeriodDateID" value="Periodo-Data Início: "/>
								<p:calendar id="beginPeriodDateID" value="#{contractController.contractDomain.beginDate}"
									locale="pt_BR" pattern="dd/MM/yyyy" timeZone="America/Sao_Paulo" mask="99/99/9999"
									required="true" requiredMessage="O campo 'Periodo-Data Início' é obrigatório">
									<f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy" timeZone="America/Sao_Paulo"/>
								</p:calendar>
					
								<p:outputLabel for="endPeriodDateID" value="Periodo-Data Término: "/>
								<p:calendar id="endPeriodDateID" value="#{contractController.contractDomain.endDate}"
									locale="pt_BR" pattern="dd/MM/yyyy" timeZone="America/Sao_Paulo" mask="99/99/9999"
									 required="true" requiredMessage="O campo 'Periodo-Data Término:' é obrigatório">
									<f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy" timeZone="America/Sao_Paulo"/>
								</p:calendar>
														
							</h:panelGrid>
						</p:panel>			
						</p:tab>
						
						<p:tab id="placeTabID" title="Lugar">
							<p:panel header="Informar o lugar.">
								<p:messages/>
								<h:panelGrid id="placeInputRegisterFormID" columns="2">		
									<p:outputLabel value="Lugar: " for="placeComboID"/>
									<p:selectOneMenu id="placeComboID" filter="false" value="#{contractController.contractDomain.placeDescription}"
										converter="omnifaces.SelectItemsConverter" required="true" requiredMessage="O campo 'Lugar' é obrigatório">
										<f:selectItem noSelectionOption="true" itemLabel="Selecione uma lugar" />
										<f:selectItem itemLabel="PINHEIROS" itemValue="PINH"/>
										<f:selectItem itemLabel="TATUAPÉ" itemValue="TATU"/>
									</p:selectOneMenu>
								</h:panelGrid>								
							</p:panel>
						</p:tab>

						<p:tab id="otherTabID" title="Aula">
							<p:panel header="Informar outro típo de informação.">
								<p:messages/>
								<h:panelGrid id="classRegisterFormID" columns="2">
					
									<p:outputLabel for="beginHourClassID" value="Aula-Hora Início: "/>
									<p:calendar id="beginHourClassID" value="#{contractController.contractDomain.hourBeginClass}"
										locale="pt_BR" pattern="HH:mm" timeZone="America/Sao_Paulo" mask="99:99"
										timeOnly="true"
										required="true" requiredMessage="O campo 'Aula-Hora Início' é obrigatório">
										<f:convertDateTime locale="pt_BR" pattern="HH:mm" timeZone="America/Sao_Paulo"/>
									</p:calendar>
											
									<p:outputLabel for="endHourClassID" value="Aula-Hora Término: "/>
									<p:calendar id="endHourClassID" value="#{contractController.contractDomain.hourEndClass}"
										locale="pt_BR" pattern="HH:mm" timeZone="America/Sao_Paulo" mask="99:99"
										timeOnly="true"
										required="true" requiredMessage="O campo 'Aula-Hora Término' é obrigatório">
										<f:convertDateTime locale="pt_BR" pattern="HH:mm" timeZone="America/Sao_Paulo"/>
									</p:calendar>
									
									<p:outputLabel for="pauseHourClassID" value="Aula-Minutos Pausa: "/>
									<p:outputLabel id="pauseHourOutputLabel" value="Aula-Minutos Pausa: "/>
									<h:inputHidden id="pauseHourClassID" value="#{contractController.contractDomain.hourPauseClass}"/>
	        						<p:slider for="pauseHourClassID" step="5" minValue="0" maxValue="30" style="width: 150px"
	        							display="pauseHourOutputLabel" displayTemplate="{value}min"/>
	        						
	        													
									<p:outputLabel value="1° Dia Letivo: " for="firstDayClassComboID"/>
									<p:selectOneMenu id="firstDayClassComboID" filter="false" value="#{contractController.contractDomain.dayClass1}"
										converter="omnifaces.SelectItemsConverter" required="true" requiredMessage="O campo '1° Dia Letivo' é obrigatório">
										<f:selectItem noSelectionOption="true" itemLabel="Escolhe o 1° dia letivo"/>
										<f:selectItems value="#{contractController.firstClassDay}"
											var="firstDay"
											itemValue="#{firstDay}"
											itemLabel="#{firstDay}"/>
										<p:ajax event="change"
											process="@this" global="false"
											listener="#{contractController.doUpdateSecondClassDay}"
											update="contractRegisterFormID:secondDayClassComboID"/>									
									</p:selectOneMenu>
									
									<p:outputLabel value="2° Dia Letivo: "/>
									<p:selectOneMenu id="secondDayClassComboID" filter="false" value="#{contractController.contractDomain.dayClass2}"
										converter="omnifaces.SelectItemsConverter">
										<f:selectItem itemValue="" itemLabel="Escolhe o 2° dia letivo"/>
										<f:selectItems value="#{contractController.secondClassDay}"
											var="secondDay"
											itemValue="#{secondDay}"
											itemLabel="#{secondDay}"/>									
									</p:selectOneMenu>								
									<p:outputLabel value="Típo de Aula: " for="typeComboID"/>
									<p:selectOneMenu id="typeComboID" filter="false" value="#{contractController.contractDomain.classType}"
										converter="omnifaces.SelectItemsConverter" required="true" requiredMessage="O campo 'Típo de Aula' é obrigatório">
										<f:selectItem noSelectionOption="true" itemLabel="Escolhe um típo"/>
										<f:selectItem itemLabel="EXTENSIVO" itemValue="EXT"/>
										<f:selectItem itemLabel="INTENSIVO" itemValue="INT"/>
										<f:selectItem itemLabel="PARTICULAR" itemValue="PAR"/>
										<f:selectItem itemLabel="INCOMPANY" itemValue="INC"/>																	
									</p:selectOneMenu>
									
									<p:outputLabel value="Pacote de horas: " for="packageComboID"/>
									<p:inputText id="packageComboID" value="#{contractController.contractDomain.packageDescription}"
										required="true" requiredMessage="O campo 'Pacote' é obrigatório"/>
									
									<p:outputLabel value="Preço por hora: " for="pricePerHourID"/>
									<p:inputNumber id="pricePerHourID" value="#{contractController.contractDomain.priceDescription}"
										symbol="R$ "  maxlength="6" decimalSeparator="," thousandSeparator="." minValue="0"
										required="true" requiredMessage="O campo 'Preço por Hora' é obrigatório"/>
									
									<p:outputLabel value="Comentário: " />
									<p:inputTextarea value="#{contractController.contractDomain.commentDescription}" rows="2" cols="30" counter="display"
										maxlength="100" counterTemplate="{0} caracteres restantes."
										autoResize="true"/>
									<br/>
									<h:outputText id="display"/>
									<br/>
									<p:spacer height="20px"/>																	
										
								</h:panelGrid>							
							</p:panel>
						</p:tab>
						
						<p:tab id="professorTabID" title="Professor">
							<p:panel header="Informar o(a) Professor(a) contratado(a).">
								<p:messages/>
								<h:panelGrid id="professorInputRegisterFormID" columns="2">		
									<p:outputLabel value="Professor(a): " for="professorComboID"/>
									<p:selectOneMenu id="professorComboID" filter="false" value="#{contractController.contractDomain.personDomain}"
										converter="omnifaces.SelectItemsConverter" required="true" requiredMessage="O campo 'Professor(a)' é obrigatório">
										<f:selectItem noSelectionOption="true" itemLabel="Escolhe um professor"/>
										<f:selectItems value="#{contractController.professors}"
											var="professor"
											itemValue="#{professor}"
											itemLabel="#{professor.completeName}"/>
									</p:selectOneMenu>
								</h:panelGrid>
							</p:panel>
						</p:tab>
												
						<p:tab id="statusTabID" title="Estado">
							<p:panel header="Informar o estado do contrato.">
								<p:messages/>
								<h:panelGrid id="statusInputRegisterFormID" columns="2">											
									<p:outputLabel value="Ativar contrato:" />
									<p:toggleSwitch value="#{contractController.contractDomain.closedFlag}" required="true" requiredMessage="O campo 'Ativar contrato' é obrigatório">
										<p:ajax listener="#{contractController.addContractMessage}" update=":idMsgGlobal" />
									</p:toggleSwitch>
								</h:panelGrid>
							</p:panel>
						</p:tab>
						
						<p:tab id="resumeTabID" title="Resumo" >
							<p:panel header="Resumo do Contrato.">
								<p:scrollPanel mode="native">
								<p:messages/>
								<h:panelGrid id="resumeInputRegisterFormID" columns="2">

									<h3 style="position: left;">Código do Contrato</h3>
									<p:separator/>

									<p:outputLabel value="Código: "/>
									<p:outputLabel id="contractCodeID" style="color:green;" value="#{contractController.contractDomain.codeDescription}"/>									
									
									<p:outputLabel value="Copiar Código: "/>
									<p:commandButton id="btnCopyContractCodeID" value="Copiar" icon="fa fa-copy" onclick="return false;"/>  
									<pe:clipboard id="clipAjax" trigger="btnCopyContractCodeID" action="copy" text="#{contractController.contractDomain.codeDescription}">  
							            <p:ajax event="success" listener="#{contractController.successListener}" update=":idMsgGlobal"/>  
							            <p:ajax event="error" listener="#{contractController.errorListener}" update=":idMsgGlobal"/> 
									</pe:clipboard>
									<p:spacer width="5px"/>
									
									<h3 style="position: left;">Língua do Contrato</h3>
									<p:separator/>
									
									<p:outputLabel value="Língua: "/>
									<p:outputLabel value="#{contractController.classLanguage}"/>
									
									<p:outputLabel value="Nível: "/>
									<p:outputLabel value="#{contractController.contractDomain.levelDescription}"/>
									
									
									<h3 style="position: left;">Período do Contrato</h3>
									<p:separator/>
									
									<p:outputLabel value="Data Início: "/>
									<p:outputLabel id="totalHourClassID" value="#{contractController.contractDomain.beginDate}">
										<f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"
											timeZone="America/Sao_Paulo"/>
									</p:outputLabel>
									
									<p:outputLabel value="Data Término: "/>
									<p:outputLabel value="#{contractController.contractDomain.endDate}">
										<f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy"
											timeZone="America/Sao_Paulo" />
									</p:outputLabel>


									<h3 style="position: left;">Lugar</h3>
									<p:separator/>
									
									<p:outputLabel value="Lugar: "/>
									<p:outputLabel value="#{contractController.classPlace}"/>


									<h3 style="position: left;">Aula</h3>
									<p:separator/>
																		
									<p:outputLabel value="Hora Início:  "/>
									<p:outputLabel value="#{contractController.contractDomain.hourBeginClass}">
										<f:convertDateTime locale="pt_BR" pattern="HH:mm"
											timeZone="America/Sao_Paulo"/>
									</p:outputLabel>									
									
									<p:outputLabel value="Hora Término: "/>
									<p:outputLabel value="#{contractController.contractDomain.hourEndClass}">
										<f:convertDateTime locale="pt_BR" pattern="HH:mm"
											timeZone="America/Sao_Paulo"/>
									</p:outputLabel>
									
									<p:outputLabel value="Pausa: "/>
									<p:outputLabel value="#{contractController.contractDomain.hourPauseClass}min"/>

									<p:outputLabel value="Hora total de Aula: " />
									<p:outputLabel style="color:red;" value="#{contractController.total}"/>
									
									<p:outputLabel value="Dia(s) letivo(s): "/>
									<p:outputLabel value="#{contractController.dayClassFullDescription}"/>
									
									
									<p:outputLabel value="Pacote de Horas: "/>
									<p:outputLabel value="#{contractController.contractDomain.packageDescription}h"/>
									
									<p:outputLabel value="Preço por Hora: "/>
									<p:outputLabel value="#{contractController.decimalPriceDescription}"/>
									
									<p:outputLabel value="Comentário: " />
									<p:outputLabel value="#{contractController.contractDomain.commentDescription}"/>
																		
														
									<h3 style="position: left;">Professor(a) Contratado(a)</h3>
									<p:separator/>
															
									<p:outputLabel value="Professor(a): " />
									<p:outputLabel value="#{contractController.contractDomain.personDomain.completeName}"/>															
																				
								</h:panelGrid>
								</p:scrollPanel>
							</p:panel>
						</p:tab>																				
					</p:wizard>							
				</h:form>				
			</p:dialog>			
			
		</div>
	</ui:define>
</ui:composition>